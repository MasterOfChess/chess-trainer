{% from "macros.html" import nav_link with context %}
<html data-bs-theme="dark">
  <head>
    <title>{% block title %}{% endblock %}</title>
    {% block head %}
    <!-- Bootstrap -->
    <script src="
https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js
"></script>
    <link
      href="
https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css
"
      rel="stylesheet"
    />
    <!-- JQuery -->
    <script
      src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2"
      crossorigin="anonymous"
    ></script>

    <script src="{{url_for('static', filename='external/js/chess.js')}}"></script>
    <link
      rel="stylesheet"
      href="{{url_for('static', filename='external/css/chessboard-1.0.0.min.css')}}"
    />
    <link
      rel="stylesheet"
      href="{{url_for('static', filename='css/index.css')}}"
    />
    <script src="{{url_for('static', filename='external/js/chessboardjs-1.0.0/chessboard-1.0.0.min.js')}}"></script>
    {% endblock %}
  </head>
  <body class="d-flex flex-column min-vh-100">
    <nav class="navbar navbar-expand bg-dark-subtle">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="/">Chess Opening Trainer</a>
        </div>
        <ul class="nav navbar-nav ml-auto">
          {% for (endpoint, text) in [('choose_opening', 'Choose opening'),
          ('new_game', 'Start new game')] %} {{ nav_link(endpoint, text,
          curr_endpoint == endpoint) }} {% endfor %}
          <li class="nav-item ml-auto">
            <button
              class="btn btn-sm btn-light"
              id="toggle-mode"
              onclick="toggleMode()"
            >
              Light mode
            </button>
          </li>
        </ul>
        </ul>
      </div>
    </nav>
    {% block body %}{% endblock %}
    <footer class="mt-auto">
      <div class="container">
        <hr />
        <div class="row d-flex justify-content-center">
          <div class="col-md-6 text-center">
            <p>© 2024 <strong>Krzysztof Łukasiewicz</strong></p>
            <a
              href="https://github.com/MasterOfChess/chess-trainer"
              class="link-secondary"
              >github</a
            >
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>
{% block after_body %}
<script>
  function toggleMode() {
    console.log("Fire");
    const html = document.querySelector("html");
    if (html.dataset.bsTheme === "dark") {
      document.querySelector('#toggle-mode').innerHTML = "Dark mode";
      html.dataset.bsTheme = "light";
    } else {
      document.querySelector('#toggle-mode').innerHTML = "Light mode";
      html.dataset.bsTheme = "dark";
    }
    
    document.querySelector('#toggle-mode').classList.toggle('btn-light');
    document.querySelector('#toggle-mode').classList.toggle('btn-dark');
  }
</script>
{% endblock %}
